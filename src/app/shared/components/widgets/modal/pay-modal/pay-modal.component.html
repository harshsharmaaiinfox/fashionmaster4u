<ng-template #payModal let-modal>
  <div class="modal-header">
    <h3 class="fw-bold">{{ 'Choose Payment' | translate }}</h3>
    <button type="button" class="btn-close" (click)="modal.dismiss('Cross click')">
      <i class="ri-close-line"></i>
    </button>
  </div>

  <div class="modal-body boutique-modal-body">
    <div class="payment-selection-container">
      <p class="section-hint">{{ 'Select your preferred payment method to complete the order.' | translate }}</p>

      <div class="payment-grid row g-3">
        <ng-container *ngFor="let payment of (setting$ | async)?.payment_methods; let i = index;">
          <div class="col-12" *ngIf="payment.status">
            <div class="payment-card-option" [class.selected]="paymentType.value === payment.name">
              <label class="payment-label" [for]="payment.name">
                <div class="payment-radio-box">
                  <input class="form-check-input boutique-radio" type="radio" name="payment_method"
                    [value]="payment.name" [id]="payment.name" [formControl]="paymentType">
                  <span class="custom-radio-mark"></span>
                </div>
                <div class="payment-info">
                  <span class="payment-title">{{ (payment.title ? payment.title : payment.name) | titlecase }}</span>
                  <span class="payment-subtitle" *ngIf="payment.name === 'cod'">{{ 'Pay when you receive' | translate
                    }}</span>
                  <span class="payment-subtitle" *ngIf="payment.name !== 'cod'">{{ 'Secure instant payment' | translate
                    }}</span>
                </div>
                <div class="payment-icon">
                  <i class="ri-bank-card-2-line" *ngIf="payment.name !== 'cod'"></i>
                  <i class="ri-hand-coin-line" *ngIf="payment.name === 'cod'"></i>
                </div>
              </label>
            </div>
          </div>
        </ng-container>
      </div>

      <div class="error-container" *ngIf="paymentType?.touched && paymentType.errors?.['required']">
        <i class="ri-error-warning-line"></i>
        {{ 'Please select a payment method to proceed' | translate }}
      </div>
    </div>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-cancel" (click)="modal.dismiss('Cancel')">
      {{ 'Cancel' | translate }}
    </button>
    <button type="button" class="btn btn-submit" (click)="submit()">
      <i class="ri-shield-check-line"></i>
      {{ 'Confirm Payment' | translate }}
    </button>
  </div>
</ng-template>