<div class="login-page-wrapper">
  <section class="premium-login-section">
    <div class="login-container">
      <div class="split-layout">

        <!-- Left Side: Brand Story -->
        <div class="brand-side d-none d-lg-flex">
          <div class="brand-content">
            <div class="brand-logo-wrap animate-fade-in">
              <img src="assets/images/fashionmaster.png" alt="Fashionmaster4u" class="brand-logo">
            </div>
            <div class="brand-text">
              <h2 class="display-title animate-slide-up">Join the <br><span>Fashion Elite.</span></h2>
              <p class="brand-description animate-slide-up-delayed">Create an account to unlock exclusive collections,
                early access to sales, and a personalized shopping experience tailored to your style.</p>
            </div>
            <div class="brand-features animate-slide-up-further">
              <div class="feature-item">
                <div class="feature-icon"><i class="ri-heart-3-line"></i></div>
                <span>Wishlist your favorites</span>
              </div>
              <div class="feature-item">
                <div class="feature-icon"><i class="ri-coupon-2-line"></i></div>
                <span>Exclusive member rewards</span>
              </div>
              <div class="feature-item">
                <div class="feature-icon"><i class="ri-history-line"></i></div>
                <span>Track orders in real-time</span>
              </div>
            </div>
          </div>
          <div class="decorative-blob"></div>
          <div class="decorative-blob-2"></div>
        </div>

        <!-- Right Side: Register Form -->
        <div class="form-side">
          <div class="login-glass-card shadow-2xl">
            <app-alert></app-alert>

            <div class="form-header text-center">
              <div class="mobile-logo d-lg-none mb-4">
                <img src="assets/images/fashionmaster.png" alt="Fashionmaster4u" class="img-fluid"
                  style="max-height: 50px;">
              </div>
              <h3>{{ 'Create New Account' | translate }}</h3>
              <p class="text-muted">{{ 'Start your fashion journey with us' | translate }}</p>
            </div>

            <form [formGroup]="form" (ngSubmit)="submit()" class="auth-form mt-4">
              <!-- Full Name -->
              <div class="form-floating-group">
                <div class="input-container"
                  [class.error]="form.controls['name'].touched && form.controls['name'].invalid">
                  <i class="ri-user-line field-icon"></i>
                  <input type="text" id="name" formControlName="name" class="form-control" placeholder=" "
                    (keydown)="allowOnlyLetters($event)" (input)="sanitizeNameInput($event)"
                    (paste)="sanitizeNamePaste($event)">
                  <label for="name">{{ 'Full Name' | translate }}</label>
                </div>
                <div *ngIf="form.controls['name'].touched && form.controls['name'].errors?.['required']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Name is required' | translate }}
                </div>
                <div *ngIf="form.controls['name'].touched && form.controls['name'].errors?.['pattern']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Only letters and spaces are allowed' | translate }}
                </div>
              </div>

              <!-- Email Field -->
              <div class="form-floating-group mt-3">
                <div class="input-container"
                  [class.error]="form.controls['email'].touched && form.controls['email'].invalid">
                  <i class="ri-mail-line field-icon"></i>
                  <input type="email" id="email" formControlName="email" class="form-control" placeholder=" ">
                  <label for="email">{{ 'Email Address' | translate }}</label>
                </div>
                <div *ngIf="form.controls['email'].touched && form.controls['email'].errors?.['required']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Email Is Required' | translate }}
                </div>
                <div *ngIf="form.controls['email'].touched && form.controls['email'].errors?.['email']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Invalid Email' | translate }}
                </div>
              </div>

              <!-- Phone Number -->
              <div class="form-floating-group mt-3">
                <div class="phone-input-split">
                  <div class="country-picker">
                    <select2 [data]="codes" [templates]="template" formControlName="country_code">
                      <ng-template #template let-data="data">
                        <div class="country-opt">
                          <div class="iti-flag {{data?.class}}"></div>
                          <span class="c-code">+{{data.code}}</span>
                        </div>
                      </ng-template>
                    </select2>
                  </div>
                  <div class="input-container flex-grow-1"
                    [class.error]="form.controls['phone'].touched && form.controls['phone'].invalid">
                    <i class="ri-smartphone-line field-icon"></i>
                    <input type="tel" id="phone" formControlName="phone" class="form-control" placeholder=" "
                      maxlength="10" (keydown)="allowOnlyDigits($event)" (input)="sanitizePhoneInput($event)"
                      (paste)="sanitizePhonePaste($event)">
                    <label for="phone">{{ 'Phone Number' | translate }}</label>
                  </div>
                </div>
                <div *ngIf="form.controls['phone'].touched && form.controls['phone'].errors?.['required']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Phone Number Is Required' | translate }}
                </div>
                <div *ngIf="form.controls['phone'].touched && form.controls['phone'].errors?.['invalid']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Phone Number must be 10 digits' | translate }}
                </div>
              </div>

              <!-- Password Field -->
              <div class="form-floating-group mt-3">
                <div class="input-container"
                  [class.error]="form.controls['password'].touched && form.controls['password'].invalid">
                  <i class="ri-lock-2-line field-icon"></i>
                  <input type="password" id="password" formControlName="password" class="form-control" placeholder=" ">
                  <label for="password">{{ 'Password' | translate }}</label>
                </div>
                <div *ngIf="form.controls['password'].touched && form.controls['password'].errors?.['required']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Password is required' | translate }}
                </div>
              </div>

              <!-- Confirm Password Field -->
              <div class="form-floating-group mt-3">
                <div class="input-container"
                  [class.error]="form.controls['password_confirmation'].touched && (form.controls['password_confirmation'].invalid || passwordMatchError)">
                  <i class="ri-shield-keyhole-line field-icon"></i>
                  <input type="password" id="password_confirmation" formControlName="password_confirmation"
                    class="form-control" placeholder=" ">
                  <label for="password_confirmation">{{ 'Confirm Password' | translate }}</label>
                </div>
                <div
                  *ngIf="form.controls['password_confirmation'].touched && form.controls['password_confirmation'].errors?.['required']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Confirm password is required' | translate }}
                </div>
                <div *ngIf="passwordMatchError && form.controls['password_confirmation'].touched" class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'Passwords do not match' | translate }}
                </div>
              </div>

              <!-- ReCaptcha -->
              <div class="form-group mt-3" *ngIf="reCaptcha">
                <re-captcha formControlName="recaptcha"></re-captcha>
                <div *ngIf="form.controls['recaptcha']?.touched && form.controls['recaptcha']?.errors?.['required']"
                  class="error-hint">
                  <i class="ri-error-warning-line"></i> {{ 'ReCaptcha is Required' | translate }}
                </div>
              </div>

              <!-- Terms Utils -->
              <div class="form-utils mt-4">
                <label class="custom-checkbox-wrap" [class.error]="tnc.touched && tnc.invalid">
                  <input type="checkbox" id="tnc" [formControl]="tnc">
                  <span class="custom-box"></span>
                  <span class="text">
                    {{ 'I Agree With' | translate }} <span class="accent-text">{{ 'Terms' | translate }}</span> & <span
                      class="accent-text">{{ 'Privacy' | translate }}</span>
                  </span>
                </label>
              </div>

              <!-- Submit Button -->
              <button type="submit" class="premium-submit-btn mt-5"
                [disabled]="tnc.invalid || form.invalid || isLoading">
                <span *ngIf="!isLoading" class="btn-text">
                  {{ 'Create Account' | translate }}
                  <i class="ri-user-add-line ms-2"></i>
                </span>
                <div *ngIf="isLoading" class="loader-wrap">
                  <span class="loader"></span>
                  <span>{{ 'Creating Account...' | translate }}</span>
                </div>
              </button>
            </form>

            <div class="auth-divider mt-5">
              <span>{{ 'OR' | translate }}</span>
            </div>

            <div class="signup-footer mt-4 text-center">
              <p>{{ 'Already Have An Account' | translate }}?</p>
              <a [routerLink]="['/auth/login']" class="register-cta">
                {{ 'Login Now' | translate }}
                <i class="ri-login-circle-line"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>